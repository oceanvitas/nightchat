<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>夜聊</title>
    <meta name="keywords" content="" />
    <meta name="description" content=""/>
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="msapplication-tap-highlight" content="no" />
    <link type="text/css" rel="stylesheet" href="css/style.css" />
</head>
<body>
<div class="layout">
    <header class="fixedHeader">
        <h1>夜聊</h1>
    </header>
    <section class="chats">
        <div class="loadMore">更多消息</div>
        <div class="openTips"></div>
        <div class="chatList">
        </div>
        <div class="loadStatus"></div>
    </section>
    <section class="actionBar">
        <div class="actionBarInner">
            <form>
                <span class="faceIcon"></span>
                <input type="text" class="inputBox" />
                <input type="submit" class="sendMessage" value="发送" />
            </form>
        </div>
    </section>
    <div class="faceBox">
        <div class="faceMask"></div>
        <div class="faceList">
            <a class="face0" data-fid="/a"></a>
            <a class="face1" data-fid="/b"></a>
            <a class="face2" data-fid="/c"></a>
            <a class="face3" data-fid="/d"></a>
            <a class="face4" data-fid="/e"></a>
            <a class="face5" data-fid="/f"></a>
            <a class="face6" data-fid="/g"></a>
            <a class="face7" data-fid="/h"></a>
            <a class="face8" data-fid="/i"></a>
            <a class="face9" data-fid="/j"></a>
            <a class="face10" data-fid="/k"></a>
            <a class="face11" data-fid="/l"></a>
            <a class="face12" data-fid="/m"></a>
            <a class="face13" data-fid="/n"></a>
            <a class="face14" data-fid="/o"></a>
            <a class="face15" data-fid="/p"></a>
        </div>
    </div>
    <div class="operateList">
        <a class="Oat"><i></i></a>
        <a class="Oskull"><i></i></a>
        <a class="Onovoice"><i></i></a>
    </div>
    <ul class="menuList">
        <li data-rid="-1">首页</li>
        <li data-rid="0">女神聊天室</li>
        <li data-rid="5">情感聊天室</li>
        <li data-rid="6">直播聊天室</li>
        <li data-rid="1">天朝聊天室</li>
        <li data-rid="2">梦想聊天室</li>
        <li data-rid="3">八卦聊天室</li>
        <li data-rid="4">书城聊天室</li>
        <li data-rid="7">树洞聊天室</li>
    </ul>
</div>


<script src="js/zepto.js"></script>
<script src="js/fastclick.js"></script>
<script src="js/zcommon.js"></script>
<script src="js/chatroom.js"></script>
<script>
    (function(D,W) {
        var chatFn = CT.chat, ls = CT.fn.LS, loadStatusController = chatFn.loadStatusController,
            ncInitLS = chatFn.commonLS.ncInit;

        //FastClick插件，重绘click事件
        $(function() {
            FastClick.attach(document.body);
        });

        //全局初始化
        chatFn.commonInit();

        //初始化
        function init(){
            var chats = $('.chats'),
                chatList = $('.chatList'),
                header = $('header'),
                actionBar = $('.actionBar'),
                chatroomIcon = $('.chatroomIcon'),
                bodyHeight = $(window).height(),
                rarr = chatFn.roomName,
                ts = new Date().getTime(),
                identityData = chatFn.identity(ncInitLS),   //在common中判断验证并传过来有效的rid，uid
                rid = identityData.rid,
                uid = identityData.uid;

            //uid和rid判断通过
            chats.height(bodyHeight - header.height() - actionBar.height() + "px");
            chatroomIcon.html(rarr[rid] + '聊天室');

            //初始化聊天室，传入聊天室号
            TOOL.chatInit({
                rid: rid
            },function(config, tool){});

            //调用事件集
            TOOL.eventset();
        };
        init();

        //GA统计数据
        (function(){
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-44283826-4', '61.145.124.31');
            ga('send', 'pageview');
        })();

    })(document,window);
</script>
</body>
</html>